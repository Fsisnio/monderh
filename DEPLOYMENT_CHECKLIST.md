# Deployment Checklist for Render

## ‚úÖ Pre-deployment Checks

### 1. Requirements Updated
- [x] `psycopg2-binary` replaced with `psycopg==3.1.18`
- [x] Python version updated to 3.13.0 in `runtime.txt` and `render.yaml`

### 2. SQLAlchemy Compatibility
- [x] Fixed `User.query.get()` deprecation warning
- [x] Updated to use `db.session.get(User, int(user_id))`

### 3. Database Configuration
- [x] PostgreSQL URL handling for both `postgres://` and `postgresql://`
- [x] Fallback to SQLite for local development

### 4. Environment Variables (Set in Render Dashboard)
- [ ] `DATABASE_URL` - PostgreSQL connection string
- [ ] `SECRET_KEY` - Flask secret key (auto-generated by Render)
- [ ] `MAIL_USERNAME` - Email for notifications
- [ ] `MAIL_PASSWORD` - Email password

### 5. Files Ready for Deployment
- [x] `requirements.txt` - Updated dependencies
- [x] `runtime.txt` - Python 3.13.0
- [x] `render.yaml` - Service configuration
- [x] `Procfile` - Gunicorn startup command
- [x] `app.py` - Main application file

## üöÄ Deployment Steps

1. **Commit all changes to Git**
   ```bash
   git add .
   git commit -m "Fix deployment issues: update to psycopg and Python 3.13"
   git push origin main
   ```

2. **Verify Render Configuration**
   - Check that `render.yaml` has correct Python version (3.13.0)
   - Ensure build command is: `pip install -r requirements.txt`
   - Ensure start command is: `gunicorn app:app --bind 0.0.0.0:$PORT --workers 2 --timeout 120`

3. **Monitor Deployment**
   - Watch Render logs for any errors
   - Check that `psycopg` installs successfully
   - Verify database connection works

## üîß Troubleshooting

### If psycopg fails to install:
- Check Python version compatibility
- Verify requirements.txt format

### If database connection fails:
- Check DATABASE_URL format
- Verify PostgreSQL service is running
- Test connection with `test_psycopg_connection.py`

### If app fails to start:
- Check gunicorn configuration
- Verify all imports work
- Check for missing environment variables

## üìù Post-deployment

1. Test the application functionality
2. Verify database operations work
3. Check email functionality
4. Test admin panel access
5. Verify file uploads work 